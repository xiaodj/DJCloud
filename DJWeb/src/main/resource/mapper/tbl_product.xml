<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.djweb.dao.IProductDAO">
    <!-- 增加产品 -->
    <insert id="insert" parameterType="com.djweb.entity.ProductEntity">
        INSERT INTO TBL_PRODUCT(PDNAME, PDINDUSTRY, PDCATEGORY, PDPROGRESS, PDSUMMARY,
        PDOS, PDNETWORK, PDACCESSWAY, PDNETWAY, PDMODULE, PDPROTOCOL, PDKEY, PDDATETIME, UID)
        VALUES(#{PDNAME}, #{PDINDUSTRY}, #{PDCATEGORY}, #{PDPROGRESS}, #{PDSUMMARY}, #{PDOS},
         #{PDNETWORK}, #{PDACCESSWAY}, #{PDNETWAY}, #{PDMODULE}, #{PDPROTOCOL}, #{PDKEY}, #{PDDATETIME}, #{UID});
    </insert>
    <!-- 更新产品信息 -->
    <update id="update" parameterType="com.djweb.entity.ProductEntity">
        UPDATE TBL_PRODUCT SET PDNAME = #{PDNAME}, PDINDUSTRY = #{PDINDUSTRY}, PDCATEGORY = #{PDCATEGORY},
         PDPROGRESS = #{PDPROGRESS}, PDSUMMARY = #{PDSUMMARY}, PDOS = #{PDOS}, PDNETWORK = #{PDNETWORK},
         PDACCESSWAY = #{PDACCESSWAY}, PDNETWAY = #{PDNETWAY}, PDMODULE = #{PDMODULE}, PDPROTOCOL = #{PDPROTOCOL}
          WHERE PID = #{PID};
    </update>
    <!-- 根据产品名称获取产品信息-->
    <select id="selectByPDName" resultType="com.djweb.entity.ProductEntity">
        SELECT * FROM TBL_PRODUCT WHERE PDNAME = #{pdname};
    </select>
    <!-- 根据产品编码获取产品详细信息 -->
    <select id="selectByPID" resultType="com.djweb.entity.ProductEntity">
        SELECT * FROM TBL_PRODUCT WHERE PID = #{pid};
    </select>
    <!-- 根据用户编码获取产品信息 -->
    <select id="selectByUID" resultType="com.djweb.entity.ProductEntity">
        SELECT * FROM TBL_PRODUCT WHERE UID = #{uid};
    </select>
    <!-- 删除产品 -->
    <delete id="deleteByPID">
        DELETE FROM TBL_PRODUCT WHERE PID = #{pid};
    </delete>
    <!-- 根据产品编码获取设备个数 -->
    <select id="GetDevNumByPID" resultType="java.lang.Integer">
        SELECT COUNT(PID) FROM TBL_DEVICE WHERE PID = #{pid};
    </select>
    <!-- 根据产品编码获取触发器个数 -->
    <select id="GetTrigNumByPID" resultType="java.lang.Integer">
        SELECT COUNT(PID) FROM TBL_TRIGGER WHERE PID = #{pid};
    </select>
</mapper>